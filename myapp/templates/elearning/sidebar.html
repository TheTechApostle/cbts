<aside class="d-flex flex-column flex-shrink-0 p-3 bg-light shadow-sm" style="height:100vh; border-right:1px solid #e5e7eb;">
  <a href="{% url 'student_dashboard' %}" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-decoration-none">
    <i class="fa-solid fa-graduation-cap text-primary me-2"></i>
    <span class="fs-5 fw-bold">E-Learning</span>
  </a>
  <hr>

  <ul class="nav nav-pills flex-column mb-auto">
    <li class="nav-item">
      <a href="{% url 'student_dashboard' %}" class="nav-link active">
        <i class="fa fa-home me-2"></i> Dashboard
      </a>
    </li>

    <!-- Courses dropdown -->
    <li>
      <!-- Courses dropdown toggle -->
        <a class="nav-link" data-bs-toggle="collapse" href="#coursesMenu" role="button">
            <i class="fa fa-book me-2"></i> Courses
        </a>

        <!-- Dropdown body -->
        <div class="collapse" id="coursesMenu">
            <ul class="list-unstyled ps-3">
                {% for course in student.courses.all %}
                <li>
                    <!-- This should be a plain link, no collapse attributes -->
                    <a href="{% url 'course_detail' course.id %}" class="nav-link">
                    <i class="fa fa-angle-right me-1"></i> {{ course.title }}
                    </a>
                </li>
                {% empty %}
                <li class="text-muted small">No courses yet</li>
                {% endfor %}
            </ul>
        </div>

    </li>

    <li>
      <a href="" class="nav-link">
        <i class="fa fa-tasks me-2"></i> Assignments
      </a>
    </li>
    <li>
      <a href="" class="nav-link">
        <i class="fa fa-bell me-2"></i> Updates
      </a>
    </li>
    <li>
      <a href="" class="nav-link">
        <i class="fa fa-robot me-2"></i> AI Assistant
      </a>
    </li>
    <li>
      <a href="" class="nav-link">
        <i class="fa fa-user me-2"></i> Profile
      </a>
    </li>
    <li>
      <a href="" class="nav-link">
        <i class="fa fa-gear me-2"></i> Settings
      </a>
    </li>
  </ul>

  <hr>
  <!-- User dropdown -->
  <div class="dropdown">
    <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle" data-bs-toggle="dropdown">
      {% if student.profile_picture %}
        <img src="{{ student.profile_picture.url }}" alt="" width="32" height="32" class="rounded-circle me-2">
      {% else %}
        <i class="fa fa-user-circle fa-2x me-2 text-secondary"></i>
      {% endif %}
      <strong>{{ student.full_name }}</strong>
    </a>
    <ul class="dropdown-menu dropdown-menu-end shadow">
      <li><a class="dropdown-item" href="">Profile</a></li>
      <li><a class="dropdown-item" href="">Settings</a></li>
      <li><hr class="dropdown-divider"></li>
      <li><a class="dropdown-item text-danger" href="{% url 'logout_user' %}">Logout</a></li>
    </ul>
  </div>
</aside>
<!-- Bootstrap 5 JS bundle (includes Popper for dropdowns/collapse) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
